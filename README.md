# minitalk
## 진행 기간
- 2023.09
## 소개
- 42 커리큘럼의 세번째 과제 중 하나이며, 운영체제 시그널을 이용해 에코 서버와 에코 클라이언트를 만드는 프로젝트입니다.
## 주요 기능
- 해당 과제는 에코 서버와 에코 클라이언트를 구현해야 합니다.
- 반드시 시그널(signal)만 사용해야 하며, 시그널 중에서도 `SIGUSR1` 과 `SIGUSR2` 만을 사용해야 합니다.
### 에코 서버(server)
- 에코 서버를 실행하면, 자신의 PID를 출력합니다.
- 시그널을 이용해 에코 클라이언트에서 받은 문자열을 그대로 출력해야만 합니다.
### 에코 클라이언트(client)
- 에코 서버의 PID와 전송할 문자열을 인자로 받습니다.
- 시그널을 이용해 에코 서버에게 문자열을 전송합니다.
## 어려웠던 점
### 동기화 문제
- 서로 다른 프로세스 간의 동기화 문제가 발생했습니다.
- 가령, 클라이언트에서 `a`(01100001)를 전송하면 서버에서도 동일하게 `a`(01100001)이 출력되어야 합니다.
- 하지만 클라이언트가 전송하는 속도에 비해 서버에서 처리하는 속도가 느려 시그널 하나에 대해서 처리하기도 전에 받은 시그널로 덮어버리는 문제가 발생했었습니다.
- 이에 대한 해결책은 두가지로 나뉘어 졌습니다.
  1. 서버가 처리하기까지 충분히 기다린다.
  2. 서버로부터 처리가 완료되었다는 시그널을 받으면, 그제서야 전송합니다.
- 첫번째 해결책은 `usleep` 을 통해 해결했습니다.
- 그러나 이 해결책은 근본적인 문제를 해결하지 못했으며 시스템마다, 각 상황마다 제대로 동작할 때도 아닐 때도 있었습니다.
- 때문에, 소켓통신처럼 서버로부터 처리가 완료했다는 시그널을 하나 받을 때 클라이언트가 데이터 하나를 전송하는 방식(hand shaking)을 택해야 했습니다.
<br>
<img width="580" alt="화면 캡처 2025-05-06 164545" src="https://github.com/user-attachments/assets/c5bd8685-ed7d-40f9-8a6e-f881eae4dc30" />
